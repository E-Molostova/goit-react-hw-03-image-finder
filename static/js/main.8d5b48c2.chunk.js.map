{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Loader/Loader.module.css","Components/Button/Button.module.css","services/api-service.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Searchbar/Searchbar.js","Components/Modal/Modal.js","Components/Loader/Loader.js","Components/Button/Button.js","App.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","fetchImages","query","currentPage","axios","get","then","res","data","ImageGalleryItem","image","openImg","className","style","onClick","largeImageURL","src","webformatURL","alt","tags","ImageGalleryItemImage","ImageGallery","gallery","map","id","Searchbar","state","search","handleInputChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","reset","SearchForm","this","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","onChange","autoComplete","autoFocus","placeholder","Component","modalRoot","document","querySelector","Modal","handleKeyDown","event","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","Loader","loader","color","height","width","Button","App","page","showModal","showLoader","error","largeImage","total","fetchGallery","hits","prevState","scrollToDown","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleFormSubmit","searchQuery","toggleModal","handleOpenPicture","console","log","showLoadMore","Math","ceil","prevProps","prevQuery","nextQuery","message","length","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8d5b48c2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__mt_Ks\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3xODa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1Ygaj\",\"Modal\":\"Modal_Modal__6kbqy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1H0zK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__huCiw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Eh8i\"};","import axios from 'axios';\r\n\r\nconst fetchImages = (query, currentPage) => {\r\n  const URL = 'https://pixabay.com/api/';\r\n  const KEY = '23291361-b9834d1407f849d06e39836e0';\r\n  return axios\r\n    .get(\r\n      `${URL}?q=${query}&page=${currentPage}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(res => res.data);\r\n};\r\n\r\nexport default fetchImages;\r\n\r\n// https://pixabay.com/api/?q=что_искать\r\n// & page=номер_страницы & key=твой_ключ\r\n// & image_type=photo & orientation=horizontal\r\n// & per_page=12\r\n","import React from 'react';\r\nimport style from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image, openImg }) => {\r\n  return (\r\n    <li\r\n      className={style.ImageGalleryItem}\r\n      onClick={() => {\r\n        openImg(image.largeImageURL);\r\n      }}\r\n    >\r\n      <img src={image.webformatURL} alt={image.tags} className={style.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport style from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ gallery, openImg }) => {\r\n  return (\r\n    <ul className={style.ImageGallery}>\r\n      {gallery.map(image => (\r\n        <ImageGalleryItem key={image.id} image={image} openImg={openImg} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(PropTypes.object),\r\n  openImg: PropTypes.func,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    search: '',\r\n  };\r\n\r\n  handleInputChange = e => {\r\n    this.setState({ search: e.target.value });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.onSubmit(this.state.search);\r\n    // this.reset();\r\n  };\r\n\r\n  reset = () => {\r\n    this.setState({ search: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={style.Searchbar}>\r\n        <form className={style.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={style.SearchFormBtn}>\r\n            <span className={style.SearchFormBtnLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={style.SearchFormInput}\r\n            type=\"text\"\r\n            value={this.state.search}\r\n            onChange={this.handleInputChange}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = { onSubmit: PropTypes.func };\r\n\r\nexport default Searchbar;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = event => {\r\n    if (event.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={style.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={style.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nexport default Modal;\r\n","import style from './Loader.module.css';\r\nimport Spinner from 'react-loader-spinner';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className={style.loader}>\r\n      <Spinner type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport style from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => (\r\n  <button type=\"button\" className={style.Button} onClick={onClick}>\r\n    Load more\r\n  </button>\r\n);\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport fetchImages from './services/api-service';\r\nimport ImageGallery from './Components/ImageGallery/ImageGallery';\r\nimport Searchbar from './Components/Searchbar/Searchbar';\r\nimport Modal from './Components/Modal/Modal';\r\nimport Loader from './Components/Loader/Loader';\r\nimport Button from './Components/Button/Button';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    gallery: [],\r\n    search: '',\r\n    page: 1,\r\n    showModal: false,\r\n    showLoader: false,\r\n    error: null,\r\n    largeImage: '',\r\n    total: 0,\r\n  };\r\n\r\n  fetchGallery = () => {\r\n    const { search, page } = this.state;\r\n    this.setState({ showLoader: true });\r\n\r\n    fetchImages(search, page)\r\n      .then(({ hits, total }) => {\r\n        this.setState(prevState => ({\r\n          gallery: [...prevState.gallery, ...hits],\r\n          page: prevState.page + 1,\r\n          total,\r\n        }));\r\n        this.scrollToDown();\r\n      })\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ showLoader: false }));\r\n  };\r\n\r\n  scrollToDown = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  handleFormSubmit = searchQuery => {\r\n    // if (this.state.search === searchQuery) {\r\n    //   return;\r\n    // }\r\n    this.setState({ search: searchQuery, gallery: [], page: 1 });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(prevState => ({\r\n      showModal: !prevState.showModal,\r\n    }));\r\n  };\r\n\r\n  handleOpenPicture = largeImage => {\r\n    console.log(largeImage);\r\n    this.setState({ largeImage });\r\n    this.toggleModal();\r\n  };\r\n\r\n  showLoadMore = () => {\r\n    const { total, page } = this.state;\r\n    return Math.ceil(total / 12) !== page - 1;\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ showLoader: true });\r\n    this.fetchGallery();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevState.search;\r\n    const nextQuery = this.state.search;\r\n    if (prevQuery !== nextQuery) {\r\n      this.fetchGallery();\r\n    }\r\n\r\n    console.log(prevQuery, nextQuery);\r\n  }\r\n  render() {\r\n    const { error, showLoader, showModal, gallery, largeImage } = this.state;\r\n    const showLoadMore = this.showLoadMore();\r\n    return (\r\n      <div>\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n\r\n        {error && <p>{error.message}</p>}\r\n\r\n        {gallery.length > 0 && <ImageGallery gallery={gallery} openImg={this.handleOpenPicture} />}\r\n\r\n        {showLoader && <Loader />}\r\n\r\n        {gallery.length > 0 && !showLoader && showLoadMore && (\r\n          <Button onClick={this.fetchGallery} />\r\n        )}\r\n\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal}>\r\n            <img src={this.state.largeImage} alt={this.state.largeImage} />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3SXD2\",\"SearchForm\":\"Searchbar_SearchForm__1LKZL\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__1y77q\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__2MLwl\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3kqPq\",\"SearchForm-input\":\"Searchbar_SearchForm-input__19ZmH\"};"],"sourceRoot":""}